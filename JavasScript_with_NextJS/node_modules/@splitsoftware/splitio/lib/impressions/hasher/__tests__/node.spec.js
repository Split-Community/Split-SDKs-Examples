"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _tapeCatch = _interopRequireDefault(require("tape-catch"));

var _hashImpression = require("../hashImpression128");

(0, _tapeCatch.default)('Hasher 128 / Impression Hasher Works', function (assert) {
  var imp1 = {
    feature: 'someFeature',
    keyName: 'someKey',
    changeNumber: 123,
    label: 'someLabel',
    treatment: 'someTreatment'
  }; // Same Impression

  var imp2 = {
    feature: 'someFeature',
    keyName: 'someKey',
    changeNumber: 123,
    label: 'someLabel',
    treatment: 'someTreatment'
  };
  assert.equal((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2)); // Different feature

  imp2.feature = 'someOtherFeature';
  assert.notEqual((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2)); // Different key

  imp2.feature = imp1.feature;
  imp2.keyName = 'someOtherKey';
  assert.notEqual((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2)); // Different changeNumber

  imp2.keyName = imp1.keyName;
  imp2.changeNumber = 456;
  assert.notEqual((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2)); // Different label

  imp2.changeNumber = imp1.changeNumber;
  imp2.label = 'someOtherLabel';
  assert.notEqual((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2)); // Different Treatment

  imp2.label = imp1.label;
  imp2.treatment = 'someOtherTreatment';
  assert.notEqual((0, _hashImpression.hashImpression128)(imp1), (0, _hashImpression.hashImpression128)(imp2));
  assert.end();
});
(0, _tapeCatch.default)('Hasher 128 / Impression Hasher Does Not Crash', function (assert) {
  var imp1 = {
    feature: 'someFeature',
    keyName: 'someKey',
    changeNumber: 123,
    label: 'someLabel',
    treatment: 'someTreatment'
  };
  imp1.keyName = null;
  assert.isNot((0, _hashImpression.hashImpression128)(imp1), null);
  imp1.changeNumber = null;
  assert.isNot((0, _hashImpression.hashImpression128)(imp1), null);
  imp1.label = null;
  assert.isNot((0, _hashImpression.hashImpression128)(imp1), null);
  imp1.treatment = null;
  assert.isNot((0, _hashImpression.hashImpression128)(imp1), null);
  assert.is((0, _hashImpression.hashImpression128)(null), null);
  assert.end();
});